(function(){"use strict";function m(a,t,e,n,l,r,u,d){var s=typeof a=="function"?a.options:a;t&&(s.render=t,s.staticRenderFns=e,s._compiled=!0),n&&(s.functional=!0),r&&(s._scopeId="data-v-"+r);var i;if(u?(i=function(o){o=o||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!o&&typeof __VUE_SSR_CONTEXT__<"u"&&(o=__VUE_SSR_CONTEXT__),l&&l.call(this,o),o&&o._registeredComponents&&o._registeredComponents.add(u)},s._ssrRegister=i):l&&(i=d?function(){l.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:l),i)if(s.functional){s._injectStyles=i;var C=s.render;s.render=function(_,h){return i.call(h),C(_,h)}}else{var c=s.beforeCreate;s.beforeCreate=c?[].concat(c,i):[i]}return{exports:a,options:s}}const b={props:{label:String,type:String,help:String,disabled:Boolean,required:Boolean,value:[String,Array],minColumns:Number,maxColumns:Number},computed:{columns(){return this.tableData[0]},rows(){return this.tableData.slice(1)},dragData(){return[...this.tableData]},dragOptions(){return{fallbackClass:"k-table-row-fallback",ghostClass:"k-table-row-ghost"}},tableData(){const a=n=>n.trim().replace(/^- /,"").replace(/^[\"\'](.*)[\"\']$/g,"$1"),t=n=>n==="- ";let e=typeof this.value=="string"?this.value.split(`
`).reduce((n,l)=>(t(l)?n.push([]):n[n.length-1].push(a(l)),n),[]).filter(n=>n.length>0).map(n=>[...n]):this.value;return e||(e=Array.from({length:4},()=>Array(this.minColumns).fill(""))),e}},methods:{moveArray(a,t,e){const[n]=a.splice(t,1);a.splice(e,0,n)},moveColumn(a,t){this.moveArray(this.columns,a,t),this.rows.forEach(e=>this.moveArray(e,a,t)),this.updateTable()},moveRow(a,t){this.moveArray(this.tableData,a,t),this.updateTable()},onColumnDrag(a){this.moveColumn(a.oldIndex-1,a.newIndex-1)},onRowDrag(a){this.moveRow(a.oldIndex+1,a.newIndex+1)},addRow(){this.tableData.push(Array(this.columns.length).fill("")),this.updateTable()},addColumn(){this.tableData.forEach(a=>a.push("")),this.updateTable()},deleteColumn(a){this.tableData.forEach(t=>t.splice(a,1)),this.updateTable()},deleteRow(a){this.tableData.splice(a+1,1),this.updateTable()},updateTable(){this.$emit("input",this.tableData)}}};var p=function(){var t=this,e=t._self._c;return e("k-field",t._b({staticClass:"k-table-field"},"k-field",t.$props,!1),[e("div",{staticClass:"k-table"},[e("table",[e("thead",[e("k-draggable",{attrs:{list:t.dragData,options:t.dragOptions,handle:!0,element:"tr"},on:{end:t.onColumnDrag}},[e("th",{staticClass:"k-table-index-column"},[t._v("#")]),t._l(t.columns,function(n,l){return e("th",{key:l+"-header",staticClass:"k-table-column",attrs:{"data-sortable":!0}},[e("k-bar",[e("k-sort-handle",{staticClass:"k-table-sort-handle"}),e("k-text-input",{attrs:{placeholder:`Column ${l+1}`,type:"text"},on:{input:function(r){return t.updateTable()}},model:{value:t.columns[l],callback:function(r){t.$set(t.columns,l,r)},expression:"columns[columnIndex]"}}),e("k-button",{directives:[{name:"show",rawName:"v-show",value:t.columns.length>t.minColumns,expression:"columns.length > minColumns"}],attrs:{title:"Delete column",icon:"remove"},on:{click:function(r){return t.deleteColumn(l)}}})],1)],1)}),e("th",{staticClass:"k-table-options-column"},[e("k-button",{attrs:{disabled:t.columns.length>=t.maxColumns,title:"Add column",icon:"add"},on:{click:function(n){return t.addColumn()}}})],1)],2)],1),e("k-draggable",{attrs:{list:t.dragData,options:t.dragOptions,handle:!0,element:"tbody"},on:{end:t.onRowDrag}},t._l(t.rows,function(n,l){return e("tr",{key:l},[e("td",{staticClass:"k-table-index-column",attrs:{"data-sortable":t.rows.length>1}},[t._t("index",function(){return[e("div",{staticClass:"k-table-index",domProps:{textContent:t._s(l+1)}})]}),e("k-sort-handle",{staticClass:"k-table-sort-handle"})],2),t._l(n,function(r,u){return e("td",{key:u,staticClass:"k-table-column"},[e("k-text-input",{attrs:{type:"text"},on:{input:function(d){return t.updateTable()}},model:{value:n[u],callback:function(d){t.$set(n,u,d)},expression:"row[columnIndex]"}})],1)}),e("td",{staticClass:"k-table-options-column"},[e("k-button",{attrs:{disabled:t.rows.length===1,title:"Delete row",icon:"remove"},on:{click:function(r){return t.deleteRow(l)}}})],1)],2)}),0)],1)]),e("footer",{staticClass:"k-bar",attrs:{"data-align":"center"}},[e("k-button",{attrs:{title:"Add row",icon:"add",size:"xs",variant:"filled"},on:{click:function(n){return t.addRow()}}})],1)])},f=[],v=m(b,p,f,!1,null,null,null,null);const k=v.exports;panel.plugin("bogdancondorachi/table-field",{fields:{table:k}})})();
